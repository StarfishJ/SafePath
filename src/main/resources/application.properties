
server.port=8081
spring.application.name=safepath

# MySQL Database Configuration
# use the unified config loader to read the database configuration
# from the db.properties file
# if the password is changed, only the db.properties file needs to be modified
spring.config.import=optional:file:./db.properties
spring.datasource.url=${spring.datasource.url:jdbc:mysql://127.0.0.1:3306/safepath?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&createDatabaseIfNotExist=true}
spring.datasource.username=${spring.datasource.username:root}
spring.datasource.password=${spring.datasource.password:root}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate Configuration for MySQL
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

spring.jpa.defer-datasource-initialization=true

# H2 Console (disabled for MySQL)
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console

spring.sql.init.mode=always

server.error.whitelabel.enabled=false

# H2 Database Configuration (commented out - using MySQL instead)
# spring.datasource.url=jdbc:h2:mem:safepath
# spring.datasource.driver-class-name=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=
# spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# spring.jpa.hibernate.ddl-auto=create-drop

# Python Script Configuration for Risk Score Update
safepath.python.executable=python
safepath.python.script.path=data-process-insert/segment_risk_clustering.py
safepath.project.root=

# Auto Update Risk Score on Startup
# Whether to automatically update the risk score on application startup (default: true)
safepath.risk-score.auto-update.enabled=true
# Delay in seconds after startup before triggering the update (default: 5 seconds, ensure the application is fully ready)
safepath.risk-score.auto-update.delay-seconds=5
# Minimum update interval (hours), avoid frequent updates (default: 1 hour)
# If the time since the last successful update is less than this time, the automatic update will be skipped
safepath.risk-score.auto-update.min-interval-hours=1

